"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(middleware)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\nasync function middleware(req) {\n    console.log(\"Middleware triggered for:\", req.nextUrl.pathname);\n    let res = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n        request: {\n            headers: req.headers\n        }\n    });\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://rgmmbwpyvebqsqdeaprb.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnbW1id3B5dmVicXNxZGVhcHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2MzMyNDEsImV4cCI6MjA3NTIwOTI0MX0.zGWd1L745Zq-NUn_Ll0Fn5nxCm77-IZttNoLvx-bog8\", {\n        cookies: {\n            get (name) {\n                return req.cookies.get(name)?.value;\n            },\n            set (name, value, options) {\n                req.cookies.set({\n                    name,\n                    value,\n                    ...options\n                });\n                res = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n                    request: {\n                        headers: req.headers\n                    }\n                });\n                res.cookies.set({\n                    name,\n                    value,\n                    ...options\n                });\n            },\n            remove (name, options) {\n                req.cookies.set({\n                    name,\n                    value: \"\",\n                    ...options\n                });\n                res = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n                    request: {\n                        headers: req.headers\n                    }\n                });\n                res.cookies.set({\n                    name,\n                    value: \"\",\n                    ...options\n                });\n            }\n        }\n    });\n    const { data: { session } } = await supabase.auth.getSession();\n    console.log(\"Session in middleware:\", session ? \"exists\" : \"null\");\n    // Protect admin routes\n    if (req.nextUrl.pathname.startsWith(\"/admin\")) {\n        console.log(\"Checking admin route protection\");\n        if (!session) {\n            console.log(\"No session, redirecting to admin login\");\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/auth/admin/login\", req.url));\n        }\n        // Check if user is admin (in a real app, you would check the user's role from your database)\n        // For now, we'll assume that if they're logged in, they can access admin routes\n        console.log(\"Session exists, allowing access to admin route\");\n    }\n    // Protect cashier routes\n    if (req.nextUrl.pathname.startsWith(\"/cashier\")) {\n        console.log(\"Checking cashier route protection\");\n        // Check for our custom cashier session\n        const cashierSession = req.cookies.get(\"cashier_session\")?.value;\n        if (!session && !cashierSession) {\n            console.log(\"No session, redirecting to cashier login\");\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/auth/cashier/login\", req.url));\n        }\n        // Check if user is cashier (in a real app, you would check the user's role from your database)\n        // For now, we'll assume that if they're logged in, they can access cashier routes\n        console.log(\"Session exists, allowing access to cashier route\");\n    }\n    console.log(\"Middleware completed, continuing with request\");\n    return res;\n}\nconst config = {\n    matcher: [\n        \"/admin/:path*\",\n        \"/cashier/:path*\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFrRDtBQUNSO0FBR25DLGVBQWVFLFdBQVdDLEdBQWdCO0lBQy9DQyxRQUFRQyxHQUFHLENBQUMsNkJBQTZCRixJQUFJRyxPQUFPLENBQUNDLFFBQVE7SUFFN0QsSUFBSUMsTUFBTVAscURBQVlBLENBQUNRLElBQUksQ0FBQztRQUMxQkMsU0FBUztZQUNQQyxTQUFTUixJQUFJUSxPQUFBQTtRQUNmO0lBQ0Y7SUFFQSxNQUFNQyxXQUFXWixpRUFBa0JBLENBQ2pDYSwwQ0FBb0MsRUFDcENBLGtOQUF5QyxFQUN6QztRQUNFSSxTQUFTO1lBQ1BDLEtBQUlDLElBQVk7Z0JBQ2QsT0FBT2hCLElBQUljLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxPQUFPQztZQUNoQztZQUNBQyxLQUFJRixJQUFZLEVBQUVDLEtBQWEsRUFBRUUsT0FBWTtnQkFDM0NuQixJQUFJYyxPQUFPLENBQUNJLEdBQUcsQ0FBQztvQkFDZEY7b0JBQ0FDO29CQUNBLEdBQUdFLE9BQUFBO2dCQUNMO2dCQUNBZCxNQUFNUCxxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO29CQUN0QkMsU0FBUzt3QkFDUEMsU0FBU1IsSUFBSVEsT0FBQUE7b0JBQ2Y7Z0JBQ0Y7Z0JBQ0FILElBQUlTLE9BQU8sQ0FBQ0ksR0FBRyxDQUFDO29CQUNkRjtvQkFDQUM7b0JBQ0EsR0FBR0UsT0FBQUE7Z0JBQ0w7WUFDRjtZQUNBQyxRQUFPSixJQUFZLEVBQUVHLE9BQVk7Z0JBQy9CbkIsSUFBSWMsT0FBTyxDQUFDSSxHQUFHLENBQUM7b0JBQ2RGO29CQUNBQyxPQUFPO29CQUNQLEdBQUdFLE9BQUFBO2dCQUNMO2dCQUNBZCxNQUFNUCxxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO29CQUN0QkMsU0FBUzt3QkFDUEMsU0FBU1IsSUFBSVEsT0FBQUE7b0JBQ2Y7Z0JBQ0Y7Z0JBQ0FILElBQUlTLE9BQU8sQ0FBQ0ksR0FBRyxDQUFDO29CQUNkRjtvQkFDQUMsT0FBTztvQkFDUCxHQUFHRSxPQUFBQTtnQkFDTDtZQUNGO1FBQ0Y7SUFDRjtJQUdGLE1BQU0sRUFDSkUsTUFBTSxFQUFFQyxPQUFBQSxFQUFRLEVBQ2pCLEdBQUcsTUFBTWIsU0FBU2MsSUFBSSxDQUFDQyxVQUFVO0lBRWxDdkIsUUFBUUMsR0FBRyxDQUFDLDBCQUEwQm9CLFVBQVUsV0FBVztJQUUzRDtJQUNBLElBQUl0QixJQUFJRyxPQUFPLENBQUNDLFFBQVEsQ0FBQ3FCLFVBQVUsQ0FBQyxXQUFXO1FBQzdDeEIsUUFBUUMsR0FBRyxDQUFDO1FBQ1osSUFBSSxDQUFDb0IsU0FBUztZQUNackIsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT0oscURBQVlBLENBQUM0QixRQUFRLENBQUMsSUFBSUMsSUFBSSxxQkFBcUIzQixJQUFJNEIsR0FBRztRQUNuRTtRQUVBO1FBQ0E7UUFDQTNCLFFBQVFDLEdBQUcsQ0FBQztJQUNkO0lBRUE7SUFDQSxJQUFJRixJQUFJRyxPQUFPLENBQUNDLFFBQVEsQ0FBQ3FCLFVBQVUsQ0FBQyxhQUFhO1FBQy9DeEIsUUFBUUMsR0FBRyxDQUFDO1FBRVo7UUFDQSxNQUFNMkIsaUJBQWlCN0IsSUFBSWMsT0FBTyxDQUFDQyxHQUFHLENBQUMsb0JBQW9CRTtRQUUzRCxJQUFJLENBQUNLLFdBQVcsQ0FBQ08sZ0JBQWdCO1lBQy9CNUIsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT0oscURBQVlBLENBQUM0QixRQUFRLENBQUMsSUFBSUMsSUFBSSx1QkFBdUIzQixJQUFJNEIsR0FBRztRQUNyRTtRQUVBO1FBQ0E7UUFDQTNCLFFBQVFDLEdBQUcsQ0FBQztJQUNkO0lBRUFELFFBQVFDLEdBQUcsQ0FBQztJQUNaLE9BQU9HO0FBQ1Q7QUFFTyxNQUFNeUIsU0FBUztJQUNwQkMsU0FBUztRQUFDO1FBQWlCO0tBQWlCO0FBQzlDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL21pZGRsZXdhcmUudHM/ZDE5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJztcclxuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxOiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnNvbGUubG9nKCdNaWRkbGV3YXJlIHRyaWdnZXJlZCBmb3I6JywgcmVxLm5leHRVcmwucGF0aG5hbWUpO1xyXG4gIFxyXG4gIGxldCByZXMgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbiAgICByZXF1ZXN0OiB7XHJcbiAgICAgIGhlYWRlcnM6IHJlcS5oZWFkZXJzLFxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTZXJ2ZXJDbGllbnQoXHJcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxyXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxyXG4gICAge1xyXG4gICAgICBjb29raWVzOiB7XHJcbiAgICAgICAgZ2V0KG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcS5jb29raWVzLmdldChuYW1lKT8udmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zOiBhbnkpIHtcclxuICAgICAgICAgIHJlcS5jb29raWVzLnNldCh7XHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXMgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICBoZWFkZXJzOiByZXEuaGVhZGVycyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmVzLmNvb2tpZXMuc2V0KHtcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbW92ZShuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IGFueSkge1xyXG4gICAgICAgICAgcmVxLmNvb2tpZXMuc2V0KHtcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgdmFsdWU6ICcnLFxyXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXMgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICBoZWFkZXJzOiByZXEuaGVhZGVycyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmVzLmNvb2tpZXMuc2V0KHtcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgdmFsdWU6ICcnLFxyXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBjb25zdCB7XHJcbiAgICBkYXRhOiB7IHNlc3Npb24gfSxcclxuICB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XHJcbiAgXHJcbiAgY29uc29sZS5sb2coJ1Nlc3Npb24gaW4gbWlkZGxld2FyZTonLCBzZXNzaW9uID8gJ2V4aXN0cycgOiAnbnVsbCcpO1xyXG5cclxuICAvLyBQcm90ZWN0IGFkbWluIHJvdXRlc1xyXG4gIGlmIChyZXEubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvYWRtaW4nKSkge1xyXG4gICAgY29uc29sZS5sb2coJ0NoZWNraW5nIGFkbWluIHJvdXRlIHByb3RlY3Rpb24nKTtcclxuICAgIGlmICghc2Vzc2lvbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm8gc2Vzc2lvbiwgcmVkaXJlY3RpbmcgdG8gYWRtaW4gbG9naW4nKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvYXV0aC9hZG1pbi9sb2dpbicsIHJlcS51cmwpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhZG1pbiAoaW4gYSByZWFsIGFwcCwgeW91IHdvdWxkIGNoZWNrIHRoZSB1c2VyJ3Mgcm9sZSBmcm9tIHlvdXIgZGF0YWJhc2UpXHJcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBhc3N1bWUgdGhhdCBpZiB0aGV5J3JlIGxvZ2dlZCBpbiwgdGhleSBjYW4gYWNjZXNzIGFkbWluIHJvdXRlc1xyXG4gICAgY29uc29sZS5sb2coJ1Nlc3Npb24gZXhpc3RzLCBhbGxvd2luZyBhY2Nlc3MgdG8gYWRtaW4gcm91dGUnKTtcclxuICB9XHJcblxyXG4gIC8vIFByb3RlY3QgY2FzaGllciByb3V0ZXNcclxuICBpZiAocmVxLm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2Nhc2hpZXInKSkge1xyXG4gICAgY29uc29sZS5sb2coJ0NoZWNraW5nIGNhc2hpZXIgcm91dGUgcHJvdGVjdGlvbicpO1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayBmb3Igb3VyIGN1c3RvbSBjYXNoaWVyIHNlc3Npb25cclxuICAgIGNvbnN0IGNhc2hpZXJTZXNzaW9uID0gcmVxLmNvb2tpZXMuZ2V0KCdjYXNoaWVyX3Nlc3Npb24nKT8udmFsdWU7XHJcbiAgICBcclxuICAgIGlmICghc2Vzc2lvbiAmJiAhY2FzaGllclNlc3Npb24pIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIHNlc3Npb24sIHJlZGlyZWN0aW5nIHRvIGNhc2hpZXIgbG9naW4nKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvYXV0aC9jYXNoaWVyL2xvZ2luJywgcmVxLnVybCkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGNhc2hpZXIgKGluIGEgcmVhbCBhcHAsIHlvdSB3b3VsZCBjaGVjayB0aGUgdXNlcidzIHJvbGUgZnJvbSB5b3VyIGRhdGFiYXNlKVxyXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgYXNzdW1lIHRoYXQgaWYgdGhleSdyZSBsb2dnZWQgaW4sIHRoZXkgY2FuIGFjY2VzcyBjYXNoaWVyIHJvdXRlc1xyXG4gICAgY29uc29sZS5sb2coJ1Nlc3Npb24gZXhpc3RzLCBhbGxvd2luZyBhY2Nlc3MgdG8gY2FzaGllciByb3V0ZScpO1xyXG4gIH1cclxuXHJcbiAgY29uc29sZS5sb2coJ01pZGRsZXdhcmUgY29tcGxldGVkLCBjb250aW51aW5nIHdpdGggcmVxdWVzdCcpO1xyXG4gIHJldHVybiByZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgbWF0Y2hlcjogWycvYWRtaW4vOnBhdGgqJywgJy9jYXNoaWVyLzpwYXRoKiddLFxyXG59OyJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJOZXh0UmVzcG9uc2UiLCJtaWRkbGV3YXJlIiwicmVxIiwiY29uc29sZSIsImxvZyIsIm5leHRVcmwiLCJwYXRobmFtZSIsInJlcyIsIm5leHQiLCJyZXF1ZXN0IiwiaGVhZGVycyIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY29va2llcyIsImdldCIsIm5hbWUiLCJ2YWx1ZSIsInNldCIsIm9wdGlvbnMiLCJyZW1vdmUiLCJkYXRhIiwic2Vzc2lvbiIsImF1dGgiLCJnZXRTZXNzaW9uIiwic3RhcnRzV2l0aCIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwiY2FzaGllclNlc3Npb24iLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});