"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/products/page",{

/***/ "(app-pages-browser)/./src/lib/supabaseClient.ts":
/*!***********************************!*\
  !*** ./src/lib/supabaseClient.ts ***!
  \***********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleSupabaseError: function() { return /* binding */ handleSupabaseError; },\n/* harmony export */   supabase: function() { return /* binding */ supabase; },\n/* harmony export */   supabaseAuth: function() { return /* binding */ supabaseAuth; },\n/* harmony export */   supabaseDB: function() { return /* binding */ supabaseDB; }\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(app-pages-browser)/./node_modules/@supabase/ssr/dist/module/index.js\");\n\n\n// Get Supabase credentials from environment variables\nconst supabaseUrl = \"https://rgmmbwpyvebqsqdeaprb.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnbW1id3B5dmVicXNxZGVhcHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2MzMyNDEsImV4cCI6MjA3NTIwOTI0MX0.zGWd1L745Zq-NUn_Ll0Fn5nxCm77-IZttNoLvx-bog8\" || 0;\n// Validate environment variables (only in development/production, not during testing)\nif (true) {\n    if (!supabaseUrl) {\n        throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL environment variable\");\n    }\n    if (!supabaseAnonKey) {\n        throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_ANON_KEY environment variable\");\n    }\n}\n// Create Supabase client for browser usage\n// Modified to handle custom cashier authentication\nconst supabase =  true ? (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createBrowserClient)(supabaseUrl, supabaseAnonKey, {\n    global: {\n        // Check for custom cashier session and set auth token if needed\n        headers: {\n            // This will be called before each request\n            \"Authorization\": (()=>{\n                // Check if we have a custom cashier session\n                const cashierSession = localStorage.getItem(\"cashier_session\");\n                if (cashierSession) {\n                    // For custom cashier auth, we still use the anon key but with a custom header\n                    // This allows us to identify cashier requests on the server side if needed\n                    return \"Bearer \".concat(supabaseAnonKey);\n                }\n                return \"Bearer \".concat(supabaseAnonKey);\n            })()\n        }\n    }\n}) : 0;\n// Custom error handling wrapper for Supabase operations\nconst handleSupabaseError = (error, operation)=>{\n    if (error) {\n        console.error(\"Supabase operation failed: \".concat(operation), error);\n        // Handle specific error types\n        if (error.message) {\n            switch(error.message){\n                case \"Invalid login credentials\":\n                    return \"Invalid email or password. Please try again.\";\n                case \"Email not confirmed\":\n                    return \"Please confirm your email address before logging in.\";\n                default:\n                    return error.message || \"An unexpected error occurred. Please try again.\";\n            }\n        }\n        return \"An unexpected error occurred. Please try again.\";\n    }\n    return null;\n};\n// Wrapper functions for common Supabase operations with error handling\nconst supabaseAuth = {\n    async signInWithEmail (email, password) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            console.log(\"Attempting to sign in with email and password:\", email);\n            const { data, error } = await supabase.auth.signInWithPassword({\n                email,\n                password\n            });\n            console.log(\"Supabase auth response:\", {\n                data,\n                error\n            });\n            const errorMessage = handleSupabaseError(error, \"sign in\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error in signInWithEmail:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async signOut () {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            console.log(\"Attempting to sign out\");\n            const { error } = await supabase.auth.signOut();\n            console.log(\"Sign out response:\", {\n                error\n            });\n            const errorMessage = handleSupabaseError(error, \"sign out\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error in signOut:\", error);\n            return {\n                error: error.message\n            };\n        }\n    },\n    async getSession () {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            console.log(\"Getting session from Supabase\");\n            const { data, error } = await supabase.auth.getSession();\n            console.log(\"Session data:\", data);\n            console.log(\"Session error:\", error);\n            const errorMessage = handleSupabaseError(error, \"get session\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error in getSession:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    }\n};\nconst supabaseDB = {\n    async getProducts () {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"products\").select(\"*\").order(\"created_at\", {\n                ascending: false\n            });\n            const errorMessage = handleSupabaseError(error, \"fetch products\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async deleteProduct (productId) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            console.log(\"Attempting to delete product with ID:\", productId);\n            const { data, error } = await supabase.from(\"products\").delete().eq(\"id\", productId);\n            console.log(\"Delete operation result:\", {\n                data,\n                error\n            });\n            // Check if any rows were affected\n            if (data && data.length === 0) {\n                console.warn(\"No rows were deleted. This might indicate a permission issue or that the product does not exist.\");\n            }\n            const errorMessage = handleSupabaseError(error, \"delete product\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Exception in deleteProduct:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async addProduct (product) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"products\").insert(product);\n            const errorMessage = handleSupabaseError(error, \"add product\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async updateProduct (productId, product) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"products\").update(product).eq(\"id\", productId);\n            const errorMessage = handleSupabaseError(error, \"update product\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async updateProductStock (productId, quantity) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"products\").update({\n                stock_quantity: quantity\n            }).eq(\"id\", productId);\n            const errorMessage = handleSupabaseError(error, \"update product stock\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async getUserRole (userId) {\n        try {\n            var _session_user_app_metadata, _session_user;\n            // Return early if we're in a test environment\n            if (false) {}\n            // First, try to get the user role from the session JWT\n            const { data: { session } } = await supabase.auth.getSession();\n            console.log(\"Session in getUserRole:\", session);\n            if (session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : (_session_user_app_metadata = _session_user.app_metadata) === null || _session_user_app_metadata === void 0 ? void 0 : _session_user_app_metadata.user_role) {\n                console.log(\"Found user role in session JWT:\", session.user.app_metadata.user_role);\n                return {\n                    data: {\n                        role: session.user.app_metadata.user_role\n                    },\n                    error: null\n                };\n            }\n            // If not available in JWT, try to fetch from database\n            // But handle the case where there might be RLS issues\n            try {\n                console.log(\"Fetching user role from database for user ID:\", userId);\n                const { data, error } = await supabase.from(\"users\").select(\"role\").eq(\"id\", userId).single();\n                console.log(\"Database response for user role:\", {\n                    data,\n                    error\n                });\n                // If we get a specific RLS error, handle it gracefully\n                if (error && error.message && error.message.includes(\"recursion\")) {\n                    console.warn(\"RLS recursion detected, returning null user data\");\n                    return {\n                        data: null,\n                        error: \"RLS recursion error\"\n                    };\n                }\n                const errorMessage = handleSupabaseError(error, \"fetch user role\");\n                if (errorMessage) {\n                    throw new Error(errorMessage);\n                }\n                return {\n                    data,\n                    error: null\n                };\n            } catch (dbError) {\n                // If there's a database error (like the recursion issue), handle it gracefully\n                console.warn(\"Database error while fetching user role:\", dbError.message);\n                return {\n                    data: null,\n                    error: dbError.message\n                };\n            }\n        } catch (error) {\n            console.error(\"Error in getUserRole:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async logActivity (userId, action, description) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"activity_logs\").insert({\n                user_id: userId,\n                action,\n                description\n            });\n            const errorMessage = handleSupabaseError(error, \"log activity\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error logging activity:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvc3VwYWJhc2VDbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBb0Q7QUFDRDtBQUVuRDtBQUNBLE1BQU1FLGNBQWNDLDBDQUFvQyxJQUFJO0FBQzVELE1BQU1HLGtCQUFrQkgsa05BQXlDLElBQUk7QUFFckU7QUFDQSxVQUFxQztJQUNuQyxJQUFJLENBQUNELGFBQWE7UUFDaEIsTUFBTSxJQUFJTSxNQUFNO0lBQ2xCO0lBRUEsSUFBSSxDQUFDRixpQkFBaUI7UUFDcEIsTUFBTSxJQUFJRSxNQUFNO0lBQ2xCO0FBQ0Y7QUFFQTtBQUNBO0FBQ08sTUFBTUMsV0FBVyxRQUNwQlIsa0VBQW1CQSxDQUFDQyxhQUFhSSxpQkFBaUI7SUFDaERJLFFBQVE7UUFDTjtRQUNBQyxTQUFTO1lBQ1A7WUFDQSxpQkFBaUIsQ0FBQztnQkFDaEI7Z0JBQ0EsTUFBTUMsaUJBQWlCQyxhQUFhQyxPQUFPLENBQUM7Z0JBQzVDLElBQUlGLGdCQUFnQjtvQkFDbEI7b0JBQ0E7b0JBQ0EsT0FBUSxVQUF5QixPQUFoQk47Z0JBQ25CO2dCQUNBLE9BQVEsVUFBeUIsT0FBaEJBO1lBQ25CO1FBQ0Y7SUFDRjtBQUNGLEtBQ0FOLENBQTBDTSxDQUFBO0FBRTlDO0FBQ08sTUFBTVMsc0JBQXNCQSxDQUFDQyxPQUFZQztJQUM5QyxJQUFJRCxPQUFPO1FBQ1RFLFFBQVFGLEtBQUssQ0FBRSw4QkFBdUMsT0FBVkMsWUFBYUQ7UUFFekQ7UUFDQSxJQUFJQSxNQUFNRyxPQUFPLEVBQUU7WUFDakIsT0FBUUgsTUFBTUcsT0FBTztnQkFDbkIsS0FBSztvQkFDSCxPQUFPO2dCQUNULEtBQUs7b0JBQ0gsT0FBTztnQkFDVDtvQkFDRSxPQUFPSCxNQUFNRyxPQUFPLElBQUk7WUFDNUI7UUFDRjtRQUVBLE9BQU87SUFDVDtJQUVBLE9BQU87QUFDVCxFQUFDO0FBRUQ7QUFDTyxNQUFNQyxlQUFlO0lBQzFCLE1BQU1DLGlCQUFnQkMsS0FBYSxFQUFFQyxR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QUFBO1lBQVE7UUFDNUM7SUFDRjtJQUVBLE1BQU0wQyxhQUFZUixNQUFjLEVBQUVTLE1BQWMsRUFBRUMsV0FBbUI7UUFDbkUsSUFBSTtZQUNGO1lBQ0EsV0FBcUMsRUFFcEM7WUFFRCxNQUFNLEVBQUV2QyxJQUFJLEVBQUVSLEtBQUFBLEVBQU8sR0FBRyxNQUFNUCxTQUMzQnlCLElBQUksQ0FBQyxpQkFDTFksTUFBTSxDQUFDO2dCQUNOa0IsU0FBU1g7Z0JBQ1RTO2dCQUNBQztZQUNGO1lBRUYsTUFBTW5DLGVBQWViLG9CQUFvQkMsT0FBTztZQUNoRCxJQUFJWSxjQUFjO2dCQUNoQixNQUFNLElBQUlwQixNQUFNb0I7WUFDbEI7WUFFQSxPQUFPO2dCQUFFSjtnQkFBTVIsT0FBTztZQUFLO1FBQzdCLEVBQUUsT0FBT0EsT0FBWTtZQUNuQkUsUUFBUUYsS0FBSyxDQUFDLDJCQUEyQkE7WUFDekMsT0FBTztnQkFBRVEsTUFBTTtnQkFBTVIsT0FBT0EsTUFBTUcsT0FBQUE7WUFBUTtRQUM1QztJQUNGO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL3N1cGFiYXNlQ2xpZW50LnRzP2Y5ZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuaW1wb3J0IHsgY3JlYXRlQnJvd3NlckNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zc3InO1xyXG5cclxuLy8gR2V0IFN1cGFiYXNlIGNyZWRlbnRpYWxzIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICcnO1xyXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCAnJztcclxuXHJcbi8vIFZhbGlkYXRlIGVudmlyb25tZW50IHZhcmlhYmxlcyAob25seSBpbiBkZXZlbG9wbWVudC9wcm9kdWN0aW9uLCBub3QgZHVyaW5nIHRlc3RpbmcpXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnKSB7XHJcbiAgaWYgKCFzdXBhYmFzZVVybCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFzdXBhYmFzZUFub25LZXkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ3JlYXRlIFN1cGFiYXNlIGNsaWVudCBmb3IgYnJvd3NlciB1c2FnZVxyXG4vLyBNb2RpZmllZCB0byBoYW5kbGUgY3VzdG9tIGNhc2hpZXIgYXV0aGVudGljYXRpb25cclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgXHJcbiAgPyBjcmVhdGVCcm93c2VyQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXksIHtcclxuICAgICAgZ2xvYmFsOiB7XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGN1c3RvbSBjYXNoaWVyIHNlc3Npb24gYW5kIHNldCBhdXRoIHRva2VuIGlmIG5lZWRlZFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSBjYWxsZWQgYmVmb3JlIGVhY2ggcmVxdWVzdFxyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGEgY3VzdG9tIGNhc2hpZXIgc2Vzc2lvblxyXG4gICAgICAgICAgICBjb25zdCBjYXNoaWVyU2Vzc2lvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXNoaWVyX3Nlc3Npb24nKTtcclxuICAgICAgICAgICAgaWYgKGNhc2hpZXJTZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgLy8gRm9yIGN1c3RvbSBjYXNoaWVyIGF1dGgsIHdlIHN0aWxsIHVzZSB0aGUgYW5vbiBrZXkgYnV0IHdpdGggYSBjdXN0b20gaGVhZGVyXHJcbiAgICAgICAgICAgICAgLy8gVGhpcyBhbGxvd3MgdXMgdG8gaWRlbnRpZnkgY2FzaGllciByZXF1ZXN0cyBvbiB0aGUgc2VydmVyIHNpZGUgaWYgbmVlZGVkXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGBCZWFyZXIgJHtzdXBhYmFzZUFub25LZXl9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYEJlYXJlciAke3N1cGFiYXNlQW5vbktleX1gO1xyXG4gICAgICAgICAgfSkoKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICA6IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuXHJcbi8vIEN1c3RvbSBlcnJvciBoYW5kbGluZyB3cmFwcGVyIGZvciBTdXBhYmFzZSBvcGVyYXRpb25zXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVTdXBhYmFzZUVycm9yID0gKGVycm9yOiBhbnksIG9wZXJhdGlvbjogc3RyaW5nKSA9PiB7XHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBTdXBhYmFzZSBvcGVyYXRpb24gZmFpbGVkOiAke29wZXJhdGlvbn1gLCBlcnJvcik7XHJcbiAgICBcclxuICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBlcnJvciB0eXBlc1xyXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UpIHtcclxuICAgICAgc3dpdGNoIChlcnJvci5tZXNzYWdlKSB7XHJcbiAgICAgICAgY2FzZSAnSW52YWxpZCBsb2dpbiBjcmVkZW50aWFscyc6XHJcbiAgICAgICAgICByZXR1cm4gJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQuIFBsZWFzZSB0cnkgYWdhaW4uJztcclxuICAgICAgICBjYXNlICdFbWFpbCBub3QgY29uZmlybWVkJzpcclxuICAgICAgICAgIHJldHVybiAnUGxlYXNlIGNvbmZpcm0geW91ciBlbWFpbCBhZGRyZXNzIGJlZm9yZSBsb2dnaW5nIGluLic7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHJldHVybiBlcnJvci5tZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuLy8gV3JhcHBlciBmdW5jdGlvbnMgZm9yIGNvbW1vbiBTdXBhYmFzZSBvcGVyYXRpb25zIHdpdGggZXJyb3IgaGFuZGxpbmdcclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQXV0aCA9IHtcclxuICBhc3luYyBzaWduSW5XaXRoRW1haWwoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUmV0dXJuIGVhcmx5IGlmIHdlJ3JlIGluIGEgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBudWxsIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHNpZ24gaW4gd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQ6JywgZW1haWwpO1xyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25JbldpdGhQYXNzd29yZCh7XHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQsXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ1N1cGFiYXNlIGF1dGggcmVzcG9uc2U6JywgeyBkYXRhLCBlcnJvciB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IsICdzaWduIGluJyk7XHJcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc2lnbkluV2l0aEVtYWlsOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIGFzeW5jIHNpZ25PdXQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBSZXR1cm4gZWFybHkgaWYgd2UncmUgaW4gYSB0ZXN0IGVudmlyb25tZW50XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZXJyb3I6IG51bGwgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gc2lnbiBvdXQnKTtcclxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduT3V0KCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnU2lnbiBvdXQgcmVzcG9uc2U6JywgeyBlcnJvciB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IsICdzaWduIG91dCcpO1xyXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7IGVycm9yOiBudWxsIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHNpZ25PdXQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4geyBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgXHJcbiAgYXN5bmMgZ2V0U2Vzc2lvbigpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFJldHVybiBlYXJseSBpZiB3ZSdyZSBpbiBhIHRlc3QgZW52aXJvbm1lbnRcclxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpIHtcclxuICAgICAgICByZXR1cm4geyBkYXRhOiB7IHNlc3Npb246IG51bGwgfSwgZXJyb3I6IG51bGwgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ0dldHRpbmcgc2Vzc2lvbiBmcm9tIFN1cGFiYXNlJyk7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gZGF0YTonLCBkYXRhKTtcclxuICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvciwgJ2dldCBzZXNzaW9uJyk7XHJcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0U2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlREIgPSB7XHJcbiAgYXN5bmMgZ2V0UHJvZHVjdHMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBSZXR1cm4gZWFybHkgaWYgd2UncmUgaW4gYSB0ZXN0IGVudmlyb25tZW50XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZGF0YTogW10sIGVycm9yOiBudWxsIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcclxuICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yLCAnZmV0Y2ggcHJvZHVjdHMnKTtcclxuICAgICAgaWYgKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgXHJcbiAgYXN5bmMgZGVsZXRlUHJvZHVjdChwcm9kdWN0SWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUmV0dXJuIGVhcmx5IGlmIHdlJ3JlIGluIGEgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IHt9LCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byBkZWxldGUgcHJvZHVjdCB3aXRoIElEOicsIHByb2R1Y3RJZCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgICAgLmVxKCdpZCcsIHByb2R1Y3RJZCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnRGVsZXRlIG9wZXJhdGlvbiByZXN1bHQ6JywgeyBkYXRhLCBlcnJvciB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIENoZWNrIGlmIGFueSByb3dzIHdlcmUgYWZmZWN0ZWRcclxuICAgICAgaWYgKGRhdGEgJiYgKGRhdGEgYXMgYW55W10pLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignTm8gcm93cyB3ZXJlIGRlbGV0ZWQuIFRoaXMgbWlnaHQgaW5kaWNhdGUgYSBwZXJtaXNzaW9uIGlzc3VlIG9yIHRoYXQgdGhlIHByb2R1Y3QgZG9lcyBub3QgZXhpc3QuJyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IsICdkZWxldGUgcHJvZHVjdCcpO1xyXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0V4Y2VwdGlvbiBpbiBkZWxldGVQcm9kdWN0OicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIGFzeW5jIGFkZFByb2R1Y3QocHJvZHVjdDogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBSZXR1cm4gZWFybHkgaWYgd2UncmUgaW4gYSB0ZXN0IGVudmlyb25tZW50XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZGF0YToge30sIGVycm9yOiBudWxsIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcclxuICAgICAgICAuaW5zZXJ0KHByb2R1Y3QpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvciwgJ2FkZCBwcm9kdWN0Jyk7XHJcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIGFzeW5jIHVwZGF0ZVByb2R1Y3QocHJvZHVjdElkOiBzdHJpbmcsIHByb2R1Y3Q6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUmV0dXJuIGVhcmx5IGlmIHdlJ3JlIGluIGEgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IHt9LCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgICAgLnVwZGF0ZShwcm9kdWN0KVxyXG4gICAgICAgIC5lcSgnaWQnLCBwcm9kdWN0SWQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvciwgJ3VwZGF0ZSBwcm9kdWN0Jyk7XHJcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIGFzeW5jIHVwZGF0ZVByb2R1Y3RTdG9jayhwcm9kdWN0SWQ6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUmV0dXJuIGVhcmx5IGlmIHdlJ3JlIGluIGEgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IHt9LCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgICAgLnVwZGF0ZSh7IHN0b2NrX3F1YW50aXR5OiBxdWFudGl0eSB9KVxyXG4gICAgICAgIC5lcSgnaWQnLCBwcm9kdWN0SWQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvciwgJ3VwZGF0ZSBwcm9kdWN0IHN0b2NrJyk7XHJcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIGFzeW5jIGdldFVzZXJSb2xlKHVzZXJJZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBSZXR1cm4gZWFybHkgaWYgd2UncmUgaW4gYSB0ZXN0IGVudmlyb25tZW50XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZGF0YTogeyByb2xlOiAnYWRtaW4nIH0sIGVycm9yOiBudWxsIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEZpcnN0LCB0cnkgdG8gZ2V0IHRoZSB1c2VyIHJvbGUgZnJvbSB0aGUgc2Vzc2lvbiBKV1RcclxuICAgICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIGluIGdldFVzZXJSb2xlOicsIHNlc3Npb24pO1xyXG4gICAgICBpZiAoc2Vzc2lvbj8udXNlcj8uYXBwX21ldGFkYXRhPy51c2VyX3JvbGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgdXNlciByb2xlIGluIHNlc3Npb24gSldUOicsIHNlc3Npb24udXNlci5hcHBfbWV0YWRhdGEudXNlcl9yb2xlKTtcclxuICAgICAgICByZXR1cm4geyBkYXRhOiB7IHJvbGU6IHNlc3Npb24udXNlci5hcHBfbWV0YWRhdGEudXNlcl9yb2xlIH0sIGVycm9yOiBudWxsIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIElmIG5vdCBhdmFpbGFibGUgaW4gSldULCB0cnkgdG8gZmV0Y2ggZnJvbSBkYXRhYmFzZVxyXG4gICAgICAvLyBCdXQgaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZXJlIG1pZ2h0IGJlIFJMUyBpc3N1ZXNcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgdXNlciByb2xlIGZyb20gZGF0YWJhc2UgZm9yIHVzZXIgSUQ6JywgdXNlcklkKTtcclxuICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3VzZXJzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ3JvbGUnKVxyXG4gICAgICAgICAgLmVxKCdpZCcsIHVzZXJJZClcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgcmVzcG9uc2UgZm9yIHVzZXIgcm9sZTonLCB7IGRhdGEsIGVycm9yIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIElmIHdlIGdldCBhIHNwZWNpZmljIFJMUyBlcnJvciwgaGFuZGxlIGl0IGdyYWNlZnVsbHlcclxuICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IubWVzc2FnZSAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdyZWN1cnNpb24nKSkge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdSTFMgcmVjdXJzaW9uIGRldGVjdGVkLCByZXR1cm5pbmcgbnVsbCB1c2VyIGRhdGEnKTtcclxuICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiAnUkxTIHJlY3Vyc2lvbiBlcnJvcicgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvciwgJ2ZldGNoIHVzZXIgcm9sZScpO1xyXG4gICAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9IGNhdGNoIChkYkVycm9yOiBhbnkpIHtcclxuICAgICAgICAvLyBJZiB0aGVyZSdzIGEgZGF0YWJhc2UgZXJyb3IgKGxpa2UgdGhlIHJlY3Vyc2lvbiBpc3N1ZSksIGhhbmRsZSBpdCBncmFjZWZ1bGx5XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdEYXRhYmFzZSBlcnJvciB3aGlsZSBmZXRjaGluZyB1c2VyIHJvbGU6JywgZGJFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogZGJFcnJvci5tZXNzYWdlIH07XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0VXNlclJvbGU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgXHJcbiAgYXN5bmMgbG9nQWN0aXZpdHkodXNlcklkOiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBSZXR1cm4gZWFybHkgaWYgd2UncmUgaW4gYSB0ZXN0IGVudmlyb25tZW50XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZGF0YToge30sIGVycm9yOiBudWxsIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2FjdGl2aXR5X2xvZ3MnKVxyXG4gICAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxyXG4gICAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IsICdsb2cgYWN0aXZpdHknKTtcclxuICAgICAgaWYgKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2dnaW5nIGFjdGl2aXR5OicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9XHJcbn07Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImNyZWF0ZUJyb3dzZXJDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJnbG9iYWwiLCJoZWFkZXJzIiwiY2FzaGllclNlc3Npb24iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaGFuZGxlU3VwYWJhc2VFcnJvciIsImVycm9yIiwib3BlcmF0aW9uIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJzdXBhYmFzZUF1dGgiLCJzaWduSW5XaXRoRW1haWwiLCJlbWFpbCIsInBhc3N3b3JkIiwiZGF0YSIsImxvZyIsImF1dGgiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJlcnJvck1lc3NhZ2UiLCJzaWduT3V0IiwiZ2V0U2Vzc2lvbiIsInNlc3Npb24iLCJzdXBhYmFzZURCIiwiZ2V0UHJvZHVjdHMiLCJmcm9tIiwic2VsZWN0Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJkZWxldGVQcm9kdWN0IiwicHJvZHVjdElkIiwiZGVsZXRlIiwiZXEiLCJsZW5ndGgiLCJ3YXJuIiwiYWRkUHJvZHVjdCIsInByb2R1Y3QiLCJpbnNlcnQiLCJ1cGRhdGVQcm9kdWN0IiwidXBkYXRlIiwidXBkYXRlUHJvZHVjdFN0b2NrIiwicXVhbnRpdHkiLCJzdG9ja19xdWFudGl0eSIsImdldFVzZXJSb2xlIiwidXNlcklkIiwicm9sZSIsInVzZXIiLCJhcHBfbWV0YWRhdGEiLCJ1c2VyX3JvbGUiLCJzaW5nbGUiLCJpbmNsdWRlcyIsImRiRXJyb3IiLCJsb2dBY3Rpdml0eSIsImFjdGlvbiIsImRlc2NyaXB0aW9uIiwidXNlcl9pZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/supabaseClient.ts\n"));

/***/ })

});