"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/reports/page",{

/***/ "(app-pages-browser)/./src/lib/supabaseClient.ts":
/*!***********************************!*\
  !*** ./src/lib/supabaseClient.ts ***!
  \***********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleSupabaseError: function() { return /* binding */ handleSupabaseError; },\n/* harmony export */   supabase: function() { return /* binding */ supabase; },\n/* harmony export */   supabaseAuth: function() { return /* binding */ supabaseAuth; },\n/* harmony export */   supabaseDB: function() { return /* binding */ supabaseDB; }\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(app-pages-browser)/./node_modules/@supabase/ssr/dist/module/index.js\");\n\n\n// Get Supabase credentials from environment variables\nconst supabaseUrl = \"https://rgmmbwpyvebqsqdeaprb.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnbW1id3B5dmVicXNxZGVhcHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2MzMyNDEsImV4cCI6MjA3NTIwOTI0MX0.zGWd1L745Zq-NUn_Ll0Fn5nxCm77-IZttNoLvx-bog8\" || 0;\n// Validate environment variables (only in development/production, not during testing)\nif (true) {\n    if (!supabaseUrl) {\n        throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL environment variable\");\n    }\n    if (!supabaseAnonKey) {\n        throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_ANON_KEY environment variable\");\n    }\n}\n// Create Supabase client for browser usage\nconst supabase =  true ? (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createBrowserClient)(supabaseUrl, supabaseAnonKey) : 0;\n// Custom error handling wrapper for Supabase operations\nconst handleSupabaseError = (error, operation)=>{\n    if (error) {\n        console.error(\"Supabase operation failed: \".concat(operation), error);\n        // Handle specific error types\n        if (error.message) {\n            switch(error.message){\n                case \"Invalid login credentials\":\n                    return \"Invalid email or password. Please try again.\";\n                case \"Email not confirmed\":\n                    return \"Please confirm your email address before logging in.\";\n                default:\n                    return error.message || \"An unexpected error occurred. Please try again.\";\n            }\n        }\n        return \"An unexpected error occurred. Please try again.\";\n    }\n    return null;\n};\n// Wrapper functions for common Supabase operations with error handling\nconst supabaseAuth = {\n    async signInWithEmail (email, password) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            console.log(\"Attempting to sign in with email and password:\", email);\n            const { data, error } = await supabase.auth.signInWithPassword({\n                email,\n                password\n            });\n            console.log(\"Supabase auth response:\", {\n                data,\n                error\n            });\n            const errorMessage = handleSupabaseError(error, \"sign in\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error in signInWithEmail:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async signOut () {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            console.log(\"Attempting to sign out\");\n            const { error } = await supabase.auth.signOut();\n            console.log(\"Sign out response:\", {\n                error\n            });\n            const errorMessage = handleSupabaseError(error, \"sign out\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error in signOut:\", error);\n            return {\n                error: error.message\n            };\n        }\n    },\n    async getSession () {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            console.log(\"Getting session from Supabase\");\n            const { data, error } = await supabase.auth.getSession();\n            console.log(\"Session data:\", data);\n            console.log(\"Session error:\", error);\n            const errorMessage = handleSupabaseError(error, \"get session\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error in getSession:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    }\n};\nconst supabaseDB = {\n    async getProducts () {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"products\").select(\"*\").order(\"created_at\", {\n                ascending: false\n            });\n            const errorMessage = handleSupabaseError(error, \"fetch products\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async deleteProduct (productId) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            console.log(\"Attempting to delete product with ID:\", productId);\n            const { data, error } = await supabase.from(\"products\").delete().eq(\"id\", productId);\n            console.log(\"Delete operation result:\", {\n                data,\n                error\n            });\n            // Check if any rows were affected\n            if (data && data.length === 0) {\n                console.warn(\"No rows were deleted. This might indicate a permission issue or that the product does not exist.\");\n            }\n            const errorMessage = handleSupabaseError(error, \"delete product\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Exception in deleteProduct:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async addProduct (product) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"products\").insert(product);\n            const errorMessage = handleSupabaseError(error, \"add product\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async updateProduct (productId, product) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"products\").update(product).eq(\"id\", productId);\n            const errorMessage = handleSupabaseError(error, \"update product\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async updateProductStock (productId, quantity) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"products\").update({\n                stock_quantity: quantity\n            }).eq(\"id\", productId);\n            const errorMessage = handleSupabaseError(error, \"update product stock\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async getUserRole (userId) {\n        try {\n            var _session_user_app_metadata, _session_user;\n            // Return early if we're in a test environment\n            if (false) {}\n            // First, try to get the user role from the session JWT\n            const { data: { session } } = await supabase.auth.getSession();\n            console.log(\"Session in getUserRole:\", session);\n            if (session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : (_session_user_app_metadata = _session_user.app_metadata) === null || _session_user_app_metadata === void 0 ? void 0 : _session_user_app_metadata.user_role) {\n                console.log(\"Found user role in session JWT:\", session.user.app_metadata.user_role);\n                return {\n                    data: {\n                        role: session.user.app_metadata.user_role\n                    },\n                    error: null\n                };\n            }\n            // If not available in JWT, try to fetch from database\n            // But handle the case where there might be RLS issues\n            try {\n                console.log(\"Fetching user role from database for user ID:\", userId);\n                const { data, error } = await supabase.from(\"users\").select(\"role\").eq(\"id\", userId).single();\n                console.log(\"Database response for user role:\", {\n                    data,\n                    error\n                });\n                // If we get a specific RLS error, handle it gracefully\n                if (error && error.message && error.message.includes(\"recursion\")) {\n                    console.warn(\"RLS recursion detected, returning null user data\");\n                    return {\n                        data: null,\n                        error: \"RLS recursion error\"\n                    };\n                }\n                const errorMessage = handleSupabaseError(error, \"fetch user role\");\n                if (errorMessage) {\n                    throw new Error(errorMessage);\n                }\n                return {\n                    data,\n                    error: null\n                };\n            } catch (dbError) {\n                // If there's a database error (like the recursion issue), handle it gracefully\n                console.warn(\"Database error while fetching user role:\", dbError.message);\n                return {\n                    data: null,\n                    error: dbError.message\n                };\n            }\n        } catch (error) {\n            console.error(\"Error in getUserRole:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    },\n    async logActivity (userId, action, description) {\n        try {\n            // Return early if we're in a test environment\n            if (false) {}\n            const { data, error } = await supabase.from(\"activity_logs\").insert({\n                user_id: userId,\n                action,\n                description\n            });\n            const errorMessage = handleSupabaseError(error, \"log activity\");\n            if (errorMessage) {\n                throw new Error(errorMessage);\n            }\n            return {\n                data,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error logging activity:\", error);\n            return {\n                data: null,\n                error: error.message\n            };\n        }\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvc3VwYWJhc2VDbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBb0Q7QUFDRDtBQUVuRDtBQUNBLE1BQU1FLGNBQWNDLDBDQUFvQyxJQUFJO0FBQzVELE1BQU1HLGtCQUFrQkgsa05BQXlDLElBQUk7QUFFckU7QUFDQSxVQUFxQztJQUNuQyxJQUFJLENBQUNELGFBQWE7UUFDaEIsTUFBTSxJQUFJTSxNQUFNO0lBQ2xCO0lBRUEsSUFBSSxDQUFDRixpQkFBaUI7UUFDcEIsTUFBTSxJQUFJRSxNQUFNO0lBQ2xCO0FBQ0Y7QUFFQTtBQUNPLE1BQU1DLFdBQVcsUUFDcEJSLGtFQUFtQkEsQ0FBQ0MsYUFBYUksbUJBQ2pDTixDQUEwQ00sQ0FBQTtBQUU5QztBQUNPLE1BQU1JLHNCQUFzQkEsQ0FBQ0MsT0FBWUM7SUFDOUMsSUFBSUQsT0FBTztRQUNURSxRQUFRRixLQUFLLENBQUUsOEJBQXVDLE9BQVZDLFlBQWFEO1FBRXpEO1FBQ0EsSUFBSUEsTUFBTUcsT0FBTyxFQUFFO1lBQ2pCLE9BQVFILE1BQU1HLE9BQU87Z0JBQ25CLEtBQUs7b0JBQ0gsT0FBTztnQkFDVCxLQUFLO29CQUNILE9BQU87Z0JBQ1Q7b0JBQ0UsT0FBT0gsTUFBTUcsT0FBTyxJQUFJO1lBQzVCO1FBQ0Y7UUFFQSxPQUFPO0lBQ1Q7SUFFQSxPQUFPO0FBQ1QsRUFBQztBQUVEO0FBQ08sTUFBTUMsZUFBZTtJQUMxQixNQUFNQyxpQkFBZ0JDLEtBQWEsRUFBRUMsUUFBZ0I7UUFDbkQsSUFBSTtZQUNGO1lBQ0EsV0FBcUMsRUFFcEM7WUFFREwsUUFBUU8sR0FBRyxDQUFDLGtEQUFrREg7WUFDOUQsTUFBTSxFQUFFRSxJQUFJLEVBQUVSLEtBQUFBLEVBQU8sR0FBRyxNQUFNRixTQUFTWSxJQUFJLENBQUNDLGtCQUFrQixDQUFDO2dCQUM3REw7Z0JBQ0FDO1lBQ0Y7WUFFQUwsUUFBUU8sR0FBRyxDQUFDLDJCQUEyQjtnQkFBRUQ7Z0JBQU1SO1lB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LG9CQUFvQkMsT0FBTztZQUNoRCxJQUFJWSxjQUFjO2dCQUNoQixNQUFNLElBQUlmLE1BQU1lO1lBQ2xCO1lBRUEsT0FBTztnQkFBRUo7Z0JBQU1SLE9BQU87WUFBSztRQUM3QixFQUFFLE9BQU9BLE9BQVk7WUFDbkJFLFFBQVFGLEtBQUssQ0FBQywyQkFBMkJBO1lBQ3pDLE9BQU87Z0JBQUVRLE1BQU07Z0JBQU1SLE9BQU9BLE1BQU1HLE9BQUFBO1lBQVE7UUFDNUM7SUFDRjtBQUNGLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9zdXBhYmFzZUNsaWVudC50cz9mOWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcbmltcG9ydCB7IGNyZWF0ZUJyb3dzZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJztcclxuXHJcbi8vIEdldCBTdXBhYmFzZSBjcmVkZW50aWFscyBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCB8fCAnJztcclxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgJyc7XHJcblxyXG4vLyBWYWxpZGF0ZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgKG9ubHkgaW4gZGV2ZWxvcG1lbnQvcHJvZHVjdGlvbiwgbm90IGR1cmluZyB0ZXN0aW5nKVxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0Jykge1xyXG4gIGlmICghc3VwYWJhc2VVcmwpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcclxuICB9XHJcblxyXG4gIGlmICghc3VwYWJhc2VBbm9uS2V5KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIENyZWF0ZSBTdXBhYmFzZSBjbGllbnQgZm9yIGJyb3dzZXIgdXNhZ2VcclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgXHJcbiAgPyBjcmVhdGVCcm93c2VyQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpXHJcbiAgOiBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7XHJcblxyXG4vLyBDdXN0b20gZXJyb3IgaGFuZGxpbmcgd3JhcHBlciBmb3IgU3VwYWJhc2Ugb3BlcmF0aW9uc1xyXG5leHBvcnQgY29uc3QgaGFuZGxlU3VwYWJhc2VFcnJvciA9IChlcnJvcjogYW55LCBvcGVyYXRpb246IHN0cmluZykgPT4ge1xyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgU3VwYWJhc2Ugb3BlcmF0aW9uIGZhaWxlZDogJHtvcGVyYXRpb259YCwgZXJyb3IpO1xyXG4gICAgXHJcbiAgICAvLyBIYW5kbGUgc3BlY2lmaWMgZXJyb3IgdHlwZXNcclxuICAgIGlmIChlcnJvci5tZXNzYWdlKSB7XHJcbiAgICAgIHN3aXRjaCAoZXJyb3IubWVzc2FnZSkge1xyXG4gICAgICAgIGNhc2UgJ0ludmFsaWQgbG9naW4gY3JlZGVudGlhbHMnOlxyXG4gICAgICAgICAgcmV0dXJuICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkLiBQbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgY2FzZSAnRW1haWwgbm90IGNvbmZpcm1lZCc6XHJcbiAgICAgICAgICByZXR1cm4gJ1BsZWFzZSBjb25maXJtIHlvdXIgZW1haWwgYWRkcmVzcyBiZWZvcmUgbG9nZ2luZyBpbi4nO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbi8vIFdyYXBwZXIgZnVuY3Rpb25zIGZvciBjb21tb24gU3VwYWJhc2Ugb3BlcmF0aW9ucyB3aXRoIGVycm9yIGhhbmRsaW5nXHJcbmV4cG9ydCBjb25zdCBzdXBhYmFzZUF1dGggPSB7XHJcbiAgYXN5bmMgc2lnbkluV2l0aEVtYWlsKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFJldHVybiBlYXJseSBpZiB3ZSdyZSBpbiBhIHRlc3QgZW52aXJvbm1lbnRcclxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpIHtcclxuICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byBzaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkOicsIGVtYWlsKTtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoe1xyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHBhc3N3b3JkLFxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZSBhdXRoIHJlc3BvbnNlOicsIHsgZGF0YSwgZXJyb3IgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yLCAnc2lnbiBpbicpO1xyXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHNpZ25JbldpdGhFbWFpbDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfSxcclxuICBcclxuICBhc3luYyBzaWduT3V0KCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUmV0dXJuIGVhcmx5IGlmIHdlJ3JlIGluIGEgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgICAgIHJldHVybiB7IGVycm9yOiBudWxsIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHNpZ24gb3V0Jyk7XHJcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbk91dCgpO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ1NpZ24gb3V0IHJlc3BvbnNlOicsIHsgZXJyb3IgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yLCAnc2lnbiBvdXQnKTtcclxuICAgICAgaWYgKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4geyBlcnJvcjogbnVsbCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzaWduT3V0OicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIGFzeW5jIGdldFNlc3Npb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBSZXR1cm4gZWFybHkgaWYgd2UncmUgaW4gYSB0ZXN0IGVudmlyb25tZW50XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZGF0YTogeyBzZXNzaW9uOiBudWxsIH0sIGVycm9yOiBudWxsIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdHZXR0aW5nIHNlc3Npb24gZnJvbSBTdXBhYmFzZScpO1xyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIGRhdGE6JywgZGF0YSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IsICdnZXQgc2Vzc2lvbicpO1xyXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFNlc3Npb246JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzdXBhYmFzZURCID0ge1xyXG4gIGFzeW5jIGdldFByb2R1Y3RzKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUmV0dXJuIGVhcmx5IGlmIHdlJ3JlIGluIGEgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IFtdLCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvciwgJ2ZldGNoIHByb2R1Y3RzJyk7XHJcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIGFzeW5jIGRlbGV0ZVByb2R1Y3QocHJvZHVjdElkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFJldHVybiBlYXJseSBpZiB3ZSdyZSBpbiBhIHRlc3QgZW52aXJvbm1lbnRcclxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpIHtcclxuICAgICAgICByZXR1cm4geyBkYXRhOiB7fSwgZXJyb3I6IG51bGwgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gZGVsZXRlIHByb2R1Y3Qgd2l0aCBJRDonLCBwcm9kdWN0SWQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncHJvZHVjdHMnKVxyXG4gICAgICAgIC5kZWxldGUoKVxyXG4gICAgICAgIC5lcSgnaWQnLCBwcm9kdWN0SWQpO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ0RlbGV0ZSBvcGVyYXRpb24gcmVzdWx0OicsIHsgZGF0YSwgZXJyb3IgfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiBhbnkgcm93cyB3ZXJlIGFmZmVjdGVkXHJcbiAgICAgIGlmIChkYXRhICYmIChkYXRhIGFzIGFueVtdKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ05vIHJvd3Mgd2VyZSBkZWxldGVkLiBUaGlzIG1pZ2h0IGluZGljYXRlIGEgcGVybWlzc2lvbiBpc3N1ZSBvciB0aGF0IHRoZSBwcm9kdWN0IGRvZXMgbm90IGV4aXN0LicpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yLCAnZGVsZXRlIHByb2R1Y3QnKTtcclxuICAgICAgaWYgKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gaW4gZGVsZXRlUHJvZHVjdDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfSxcclxuICBcclxuICBhc3luYyBhZGRQcm9kdWN0KHByb2R1Y3Q6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUmV0dXJuIGVhcmx5IGlmIHdlJ3JlIGluIGEgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IHt9LCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgICAgLmluc2VydChwcm9kdWN0KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IsICdhZGQgcHJvZHVjdCcpO1xyXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfSxcclxuICBcclxuICBhc3luYyB1cGRhdGVQcm9kdWN0KHByb2R1Y3RJZDogc3RyaW5nLCBwcm9kdWN0OiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFJldHVybiBlYXJseSBpZiB3ZSdyZSBpbiBhIHRlc3QgZW52aXJvbm1lbnRcclxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpIHtcclxuICAgICAgICByZXR1cm4geyBkYXRhOiB7fSwgZXJyb3I6IG51bGwgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncHJvZHVjdHMnKVxyXG4gICAgICAgIC51cGRhdGUocHJvZHVjdClcclxuICAgICAgICAuZXEoJ2lkJywgcHJvZHVjdElkKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IsICd1cGRhdGUgcHJvZHVjdCcpO1xyXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfSxcclxuICBcclxuICBhc3luYyB1cGRhdGVQcm9kdWN0U3RvY2socHJvZHVjdElkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFJldHVybiBlYXJseSBpZiB3ZSdyZSBpbiBhIHRlc3QgZW52aXJvbm1lbnRcclxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpIHtcclxuICAgICAgICByZXR1cm4geyBkYXRhOiB7fSwgZXJyb3I6IG51bGwgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncHJvZHVjdHMnKVxyXG4gICAgICAgIC51cGRhdGUoeyBzdG9ja19xdWFudGl0eTogcXVhbnRpdHkgfSlcclxuICAgICAgICAuZXEoJ2lkJywgcHJvZHVjdElkKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IsICd1cGRhdGUgcHJvZHVjdCBzdG9jaycpO1xyXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfSxcclxuICBcclxuICBhc3luYyBnZXRVc2VyUm9sZSh1c2VySWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUmV0dXJuIGVhcmx5IGlmIHdlJ3JlIGluIGEgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IHsgcm9sZTogJ2FkbWluJyB9LCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBGaXJzdCwgdHJ5IHRvIGdldCB0aGUgdXNlciByb2xlIGZyb20gdGhlIHNlc3Npb24gSldUXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpO1xyXG4gICAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiBpbiBnZXRVc2VyUm9sZTonLCBzZXNzaW9uKTtcclxuICAgICAgaWYgKHNlc3Npb24/LnVzZXI/LmFwcF9tZXRhZGF0YT8udXNlcl9yb2xlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIHVzZXIgcm9sZSBpbiBzZXNzaW9uIEpXVDonLCBzZXNzaW9uLnVzZXIuYXBwX21ldGFkYXRhLnVzZXJfcm9sZSk7XHJcbiAgICAgICAgcmV0dXJuIHsgZGF0YTogeyByb2xlOiBzZXNzaW9uLnVzZXIuYXBwX21ldGFkYXRhLnVzZXJfcm9sZSB9LCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBJZiBub3QgYXZhaWxhYmxlIGluIEpXVCwgdHJ5IHRvIGZldGNoIGZyb20gZGF0YWJhc2VcclxuICAgICAgLy8gQnV0IGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGVyZSBtaWdodCBiZSBSTFMgaXNzdWVzXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIHVzZXIgcm9sZSBmcm9tIGRhdGFiYXNlIGZvciB1c2VyIElEOicsIHVzZXJJZCk7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgICAgICAuc2VsZWN0KCdyb2xlJylcclxuICAgICAgICAgIC5lcSgnaWQnLCB1c2VySWQpXHJcbiAgICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIHJlc3BvbnNlIGZvciB1c2VyIHJvbGU6JywgeyBkYXRhLCBlcnJvciB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiB3ZSBnZXQgYSBzcGVjaWZpYyBSTFMgZXJyb3IsIGhhbmRsZSBpdCBncmFjZWZ1bGx5XHJcbiAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLm1lc3NhZ2UgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncmVjdXJzaW9uJykpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybignUkxTIHJlY3Vyc2lvbiBkZXRlY3RlZCwgcmV0dXJuaW5nIG51bGwgdXNlciBkYXRhJyk7XHJcbiAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogJ1JMUyByZWN1cnNpb24gZXJyb3InIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IsICdmZXRjaCB1c2VyIHJvbGUnKTtcclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcclxuICAgICAgfSBjYXRjaCAoZGJFcnJvcjogYW55KSB7XHJcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhIGRhdGFiYXNlIGVycm9yIChsaWtlIHRoZSByZWN1cnNpb24gaXNzdWUpLCBoYW5kbGUgaXQgZ3JhY2VmdWxseVxyXG4gICAgICAgIGNvbnNvbGUud2FybignRGF0YWJhc2UgZXJyb3Igd2hpbGUgZmV0Y2hpbmcgdXNlciByb2xlOicsIGRiRXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGRiRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFVzZXJSb2xlOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIGFzeW5jIGxvZ0FjdGl2aXR5KHVzZXJJZDogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gUmV0dXJuIGVhcmx5IGlmIHdlJ3JlIGluIGEgdGVzdCBlbnZpcm9ubWVudFxyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgICAgIHJldHVybiB7IGRhdGE6IHt9LCBlcnJvcjogbnVsbCB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdhY3Rpdml0eV9sb2dzJylcclxuICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICAgIGFjdGlvbixcclxuICAgICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yLCAnbG9nIGFjdGl2aXR5Jyk7XHJcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBhY3Rpdml0eTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfVxyXG59OyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJjcmVhdGVCcm93c2VyQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJFcnJvciIsInN1cGFiYXNlIiwiaGFuZGxlU3VwYWJhc2VFcnJvciIsImVycm9yIiwib3BlcmF0aW9uIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJzdXBhYmFzZUF1dGgiLCJzaWduSW5XaXRoRW1haWwiLCJlbWFpbCIsInBhc3N3b3JkIiwiZGF0YSIsImxvZyIsImF1dGgiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJlcnJvck1lc3NhZ2UiLCJzaWduT3V0IiwiZ2V0U2Vzc2lvbiIsInNlc3Npb24iLCJzdXBhYmFzZURCIiwiZ2V0UHJvZHVjdHMiLCJmcm9tIiwic2VsZWN0Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJkZWxldGVQcm9kdWN0IiwicHJvZHVjdElkIiwiZGVsZXRlIiwiZXEiLCJsZW5ndGgiLCJ3YXJuIiwiYWRkUHJvZHVjdCIsInByb2R1Y3QiLCJpbnNlcnQiLCJ1cGRhdGVQcm9kdWN0IiwidXBkYXRlIiwidXBkYXRlUHJvZHVjdFN0b2NrIiwicXVhbnRpdHkiLCJzdG9ja19xdWFudGl0eSIsImdldFVzZXJSb2xlIiwidXNlcklkIiwicm9sZSIsInVzZXIiLCJhcHBfbWV0YWRhdGEiLCJ1c2VyX3JvbGUiLCJzaW5nbGUiLCJpbmNsdWRlcyIsImRiRXJyb3IiLCJsb2dBY3Rpdml0eSIsImFjdGlvbiIsImRlc2NyaXB0aW9uIiwidXNlcl9pZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/supabaseClient.ts\n"));

/***/ })

});